{% extends 'base.html' %}

{% block title %}{{ profile_user.username }}'s Profile - Django Blog{% endblock %}

{% block content %}
<h2>{{ profile_user.username }}'s Profile</h2>

<div class="profile-info">
    <p><strong>Name:</strong> {{ profile_user.first_name }} {{ profile_user.last_name }}</p>
    <p><strong>Username:</strong> {{ profile_user.username }}</p>
    <p><strong>Email:</strong> {{ profile_user.email }}</p>
    <p><strong>Joined:</strong> {{ profile_user.date_joined|date:"F d, Y" }}</p>

    {% if profile_user.profile.bio %}
        <p><strong>Bio:</strong> {{ profile_user.profile.bio }}</p>
    {% endif %}

    {% if profile_user.profile.location %}
        <p><strong>Location:</strong> {{ profile_user.profile.location }}</p>
    {% endif %}

    {% if profile_user.profile.birth_date %}
        <p><strong>Birth Date:</strong> {{ profile_user.profile.birth_date|date:"F d, Y" }}</p>
    {% endif %}

    {% if profile_user.profile.website %}
        <p><strong>Website:</strong> <a href="{{ profile_user.profile.website }}" target="_blank">{{ profile_user.profile.website }}</a></p>
    {% endif %}

    {% if profile_user.profile.avatar %}
        <p><strong>Avatar:</strong></p>
        <img src="{{ profile_user.profile.avatar.url }}" alt="Avatar" width="150" style="border-radius: 50%;">
    {% endif %}
</div>

<h3>{{ profile_user.username }}'s Blog Posts</h3>

{% if blogs %}
    {% for blog in blogs %}
        <article>
            <h4><a href="{% url 'blog_detail' blog.pk %}">{{ blog.title }}</a></h4>
            <p><strong>Category:</strong>
                {% if blog.category %}
                    <a href="{% url 'category_detail' blog.category.pk %}">{{ blog.category.name }}</a>
                {% else %}
                    Uncategorized
                {% endif %}
            </p>
            <p><strong>Published:</strong> {{ blog.created_at|date:"F d, Y" }}</p>
            <p><strong>Views:</strong> {{ blog.views }}</p>
            <p>{{ blog.content|truncatewords:30 }}</p>
            <p><a href="{% url 'blog_detail' blog.pk %}">Read More...</a></p>
        </article>
        <hr>
    {% endfor %}
{% else %}
    <p>{{ profile_user.username }} hasn't published any blog posts yet.</p>
{% endif %}
{% endblock %}